{% extends 'base.html' %}

{% block content %}
<h2>Contacts in List</h2>
{% if error %}
    <p>{{ error }}</p>
{% else %}
    <table>
        <tr>
            <th>Name</th>
            <th>Email</th>
            <th>Phone</th>
            <th>Actions</th>
        </tr>
    {% for contact in contacts %}
        <tr>
            <td>{{ contact.name }}</td>
            <td>{{ contact.email }}</td>
            <td>{{ contact.phone }}</td>
            <td>
                <a href="{% url 'update_contact_page' contact.id %}">Edit</a>
                <form method="post" action="{% url 'delete_contact' contact.id %}" style="display:inline;">
                    {% csrf_token %}
                    <input type="hidden" name="list_id" value="{{ list_id }}">
                    <button type="submit" onclick="return confirm('Are you sure?')">Delete</button>
                </form>
            </td>
        </tr>
    {% empty %}
        <tr><td colspan="4">No contacts in this list.</td></tr>
    {% endfor %}
    </table>
{% endif %}
<a href="{% url 'create_contact_page' list_id %}">Add New Contact</a>
<a href="{% url 'contact_lists_page' %}">Back to Contact Lists</a>
{% endblock %}